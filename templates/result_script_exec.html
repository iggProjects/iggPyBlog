{% extends 'layout.html' %}

{% block body %}

    <h1 style= "margin-left:11%; font-size:25px;">PY CLIENT SUBPROCESS FOR&nbsp;&nbsp;&nbsp;==> "{{py_name}}"</h1>
    <div id="div_matrix" style="max-width:80%; max-height:75vh; margin:auto; overflow-y:scroll; padding: 20px;padding-left: 50px; border:10px solid rgb(128, 106, 252); border-radius: 10px; background-color: rgb(8, 8, 124); ">
    <!--        
    {% for line in list_lines %}
        <p class="p_result" style='color:{{line[0]}}'>{{ line[1] }}</p>        
        <p style='color:{{line[0]}}' onclick='alert("{{line[0]}}")'>{{ line[1] }}</p>      
    {% endfor %}
    -->
    </div>
    <script type="text/javascript">

        function span_ones(line){
            span_line="";
            for ( j=0; j<line.length; j++ ){
                if (line[j] == 1) {
                    span_line += "<span>&nbsp;1</span>";
                } else {
                    span_line += "&nbsp;" + line[j];
                }
            }
            return span_line; 
        }

        var lines = {{ list_JS_lines | tojson }};
        console.log('type of lines var: ' + typeof(lines));
        console.log('type of lines var: ' + Object.prototype.toString.call(lines));


        div_matrix_html = "";
        list_matrices = []
        matrix = []

        for (i=0; i < lines.length; i++) {
            // console.log('===> list line ' + i + ' -- ' + lines[i])
            if ( lines[i][0] == 'M' || lines[i][0] == 'I'  ) {
                list_matrices.push(matrix)
                matrix = []
                div_matrix_html += "<br><p class='p_result' style='color:yellow;'>" + lines[i] + "</p>";
                matrix.push(lines[i])
                console.log('matrix: ' + matrix)
            } else if ( lines[i][0] == 0 || lines[i][0] == 1) {    
                div_matrix_html += "<p class='p_result'>" + span_ones(lines[i]) + "</p>";   
                matrix.push(lines[i])     
            } else {
                div_matrix_html += "<br><p class='p_result' style='color:yellow;'>" + lines[i] + "</p>";
            }   
        }
        
        document.getElementById("div_matrix").innerHTML = div_matrix_html;
        console.log('list_matrices===> ' + list_matrices[10])
        
    </script>

{% endblock %}